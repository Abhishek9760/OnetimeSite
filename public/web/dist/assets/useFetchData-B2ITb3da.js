import{r as c,j as f}from"./main-CBJljsce.js";function v({url:l,onSuccess:u,onError:i}){const t=c([]),a=c(null),n=c(!1),o=c(""),s=c(0),d=c(null);return{records:t,details:a,isLoading:n,error:o,count:s,custid:d,fetchData:async()=>{n.value=!0,o.value="";try{const r=await fetch(l,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch data from ${l}`);const e=await r.json();if("record"in e)t.value=[e.record],s.value=1,a.value=e.details||null;else if("records"in e)t.value=e.records,s.value=e.count,d.value=e.custid,a.value=e.details||null;else throw new Error("Unexpected response format");u&&u(t.value,a.value)}catch(r){r instanceof Error?o.value=r.message:(console.error("An unexpected error occurred",r),o.value="An unexpected error occurred"),i&&i(r)}finally{n.value=!1}}}}function m(l){const{records:u,details:i,isLoading:t,error:a,count:n,custid:o,fetchData:s}=v(l);return{record:f(()=>u.value[0]||null),details:i,isLoading:t,error:a,count:n,custid:o,fetchData:s}}export{m as a,v as u};
