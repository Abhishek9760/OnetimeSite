import{d as S,o as d,c as r,b as e,t,F as i,k as l,j as $,m as C,f as n,e as o,h as B}from"./main-CBJljsce.js";import{a as T}from"./useFetchData-B2ITb3da.js";const j={class:"p-2"},M={class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1"},I={class:"space-y-1"},N={class:"text-gray-800 dark:text-gray-200 flex-grow"},R={class:"text-xs text-gray-500 dark:text-gray-400 ml-2 whitespace-nowrap"},V=S({__name:"FeedbackSection",props:{title:{},count:{},feedback:{}},setup(D){return(c,_)=>(d(),r("div",j,[e("h4",M,t(c.title)+" ("+t(c.count)+") ",1),e("ul",I,[(d(!0),r(i,null,l(c.feedback,s=>(d(),r("li",{key:s.stamp,class:"bg-gray-50 dark:bg-gray-900 rounded px-2 py-1 flex justify-between items-start"},[e("span",N,t(s.msg),1),e("span",R,t(s.stamp),1)]))),128))])]))}}),z={class:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden"},E={id:"primaryTabs",class:"border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10"},L={class:"flex overflow-x-auto"},P=["href"],U={class:"p-6"},Y={id:"stats",class:"mb-8"},q={class:"bg-gray-100 dark:bg-gray-700 rounded-lg p-4 mb-4"},A={class:"text-gray-800 dark:text-gray-200"},G={class:"font-bold"},H={class:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-200"},J={class:"text-gray-800 dark:text-gray-200"},K={id:"feedback",class:"mb-8"},O={class:"text-lg font-bold mb-2 text-gray-800 dark:text-gray-200"},Q={class:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-lg text-sm"},W={class:"divide-y divide-gray-200 dark:divide-gray-700"},X={id:"customers",class:"mb-8"},Z={class:"text-xl font-bold mb-2 text-gray-800 dark:text-gray-200"},ee={class:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-lg divide-y divide-gray-200 dark:divide-gray-700"},te=["title"],se={class:"flex items-center justify-between"},ae={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},oe={class:"text-sm text-gray-500 dark:text-gray-400"},de={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},re={id:"misc",class:"mb-8"},ce=e("h3",{class:"text-xl font-bold mt-6 mb-2 text-gray-800 dark:text-gray-200"},"Redis Info",-1),ne={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg overflow-x-auto text-sm text-gray-800 dark:text-gray-200"},ge=S({__name:"ColonelIndex",setup(D){const c=[{name:"Stats",href:"#stats"},{name:"Customers",href:"#customers"},{name:"Feedback",href:"#feedback"},{name:"Misc",href:"#misc"}],_=$(()=>s.value?[{title:"Today",count:s.value.counts.today_feedback_count,feedback:s.value.today_feedback},{title:"Yesterday",count:s.value.counts.yesterday_feedback_count,feedback:s.value.yesterday_feedback},{title:"Past 14 Days",count:s.value.counts.older_feedback_count,feedback:s.value.older_feedback}]:[]),{record:s,fetchData:F}=T({url:"/api/v2/colonel"});return C(F),(ie,le)=>{var u,g,y,h,f,b,x,m,k,p,v,w;return d(),r("div",z,[e("div",E,[e("nav",L,[(d(),r(i,null,l(c,a=>e("a",{key:a.href,href:a.href,class:"text-gray-600 dark:text-gray-300 hover:text-brand-500 dark:hover:text-brand-400 px-3 py-2 font-medium text-sm"},t(a.name),9,P)),64))])]),e("div",U,[e("div",Y,[e("div",q,[e("p",A,[n(" Sessions: "),e("span",G,t((u=o(s))==null?void 0:u.counts.session_count),1),n(" (active in the past 5 minutes) ")])]),e("h3",H," Secrets ("+t((g=o(s))==null?void 0:g.counts.secret_count)+") ",1),e("p",J," Metadata / Secrets: "+t((y=o(s))==null?void 0:y.counts.metadata_count)+"/"+t((h=o(s))==null?void 0:h.counts.secret_count)+" ("+t((f=o(s))==null?void 0:f.counts.secrets_created)+"/"+t((b=o(s))==null?void 0:b.counts.secrets_shared)+"/"+t((x=o(s))==null?void 0:x.counts.emails_sent)+" total) ",1)]),e("div",K,[e("h3",O," User Feedback (Total: "+t((m=o(s))==null?void 0:m.counts.feedback_count)+") ",1),e("div",Q,[e("div",W,[(d(!0),r(i,null,l(_.value,a=>(d(),B(V,{key:a.title,title:a.title,count:a.count,feedback:a.feedback},null,8,["title","count","feedback"]))),128))])])]),e("div",X,[e("h3",Z," Customers ("+t((k=o(s))==null?void 0:k.counts.recent_customer_count)+" of "+t((p=o(s))==null?void 0:p.counts.customer_count)+") ",1),e("ul",ee,[(d(!0),r(i,null,l((v=o(s))==null?void 0:v.recent_customers,a=>(d(),r("li",{key:a.custid,class:"px-4 py-3 sm:px-6",title:a.verified?"verified":"not verified"},[e("div",se,[e("p",ae,[e("strong",null,t(a.custid),1),n(t(a.colonel?"*":""),1)]),e("p",oe,t(a.secrets_created)+"/"+t(a.secrets_shared)+"/"+t(a.emails_sent)+" ["+t(a.planid)+"] ",1)]),e("p",de,[e("em",null,t(a.stamp),1),n(t(a.verified?"":"?"),1)])],8,te))),128))])]),e("div",re,[ce,e("pre",ne,t((w=o(s))==null?void 0:w.redis_info),1)])])])}}});export{ge as default};
