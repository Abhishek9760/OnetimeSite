import{O as W,o as t,c as s,L as N,d as V,b as e,e as d,t as n,g as i,f as w,F as $,u as j,r as k,m as F,j as m,P as I,i as S,y as R,p as z,K,h as q}from"./main-CBJljsce.js";import{a as A}from"./useFetchData-B2ITb3da.js";import{u as H}from"./useFormSubmission-CTy2EZGF.js";import{u as P}from"./useClipboard-BbpwP2Q6.js";import{_ as U}from"./BasicFormAlerts-CxPZlJK5.js";const Y={},Z={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-8"},G=N('<div class="text-center mb-8"><svg class="mx-auto w-20 h-20 text-brand-500" width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 15V17M12 7V13M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div><h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-6" aria-label="Information no longer available"> That information is no longer available. </h1><p class="text-lg text-gray-600 dark:text-gray-300 mb-8"><em>Welcome to Onetime Secret.</em> Sensitive information shared through our service can only be accessed once. Once viewed, the content is permanently deleted from our servers to ensure confidentiality. This approach helps protect your sensitive data by limiting its exposure and preventing unauthorized access. </p><div class="bg-brandcomp-50 dark:bg-brandcomp-900 border-l-4 border-brandcomp-500 p-5 mb-8"><p class="text-lg text-brandcomp-700 dark:text-brandcomp-200 font-medium"> If you&#39;re unsure what to do next, please follow up with the person who sent you this link for more information. </p></div><a href="/" class="inline-block bg-white font-brand hover:border-brand-600 text-brand-500 font-medium py-3 px-6 border-2 rounded-lg transition duration-300 ease-in-out text-lg" aria-label="Return to home page"> Return to Home </a>',5),J=[G];function Q(h,c){return t(),s("div",Z,J)}const X=W(Y,[["render",Q]]),ee={class:"relative"},te=["rows","value"],re=["title"],se={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ae=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1),oe=[ae],ne={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ie=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1),de=[ie],le={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ce={key:1,class:"bg-brandcomp-100 border-l-4 border-brandcomp-500 text-blue-700 p-4 text-sm dark:bg-blue-800 dark:text-blue-200"},ue={class:"mt-4"},ge={key:0,class:"bg-gray-100 border-l-4 border-gray-400 text-gray-700 my-16 p-4 mb-4 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300"},he=e("button",{type:"button",class:"float-right hover:text-gray-900 dark:hover:text-gray-100",onclick:"this.parentElement.remove()"}," × ",-1),be=e("p",null," Once you've finished viewing the secret, feel free to navigate away from this page or close the window. ",-1),pe=[he,be],me={key:1},ve={href:"/signin",class:"block w-full px-4 py-2 text-center text-brand-500 bg-white border border-brand-500 rounded-md hover:bg-brand-50 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 dark:bg-gray-800 dark:text-brand-400 dark:border-brand-400 dark:hover:bg-gray-700"},ye=e("div",{class:"text-center pt-20 text-xs text-gray-400 dark:text-gray-600"},[e("a",{href:"https://onetimesecret.com",class:"hover:underline",target:"_blank",rel:"noopener noreferrer"}," Powered by Onetime Secret ")],-1),_e=V({__name:"SecretDisplayCase",props:{secret:{},details:{}},setup(h){const c=h,{isCopied:u,copyToClipboard:b}=P(),v=()=>{c.secret.secret_value!==void 0&&b(c.secret.secret_value)},y=a=>{var g;(g=a.target.closest(".bg-brandcomp-100"))==null||g.remove()};return(a,g)=>(t(),s($,null,[e("div",ee,[e("textarea",{class:"w-full px-3 py-2 border border-gray-300 rounded-md resize-none dark:border-gray-600 dark:text-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-brand-500 font-mono text-base leading-[1.2] tracking-wider bg-gray-100",readonly:"",rows:a.details.display_lines,value:a.secret.secret_value},null,8,te),e("button",{onClick:v,title:d(u)?"Copied!":"Copy to clipboard",class:"absolute top-2 right-2 p-1.5 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-500 transition-colors duration-200","aria-label":"Copy to clipboard"},[d(u)?(t(),s("svg",ne,de)):(t(),s("svg",se,oe))],8,re)]),a.secret.verification?i("",!0):(t(),s("p",le," ("+n(a.$t("web.COMMON.careful_only_see_once"))+") ",1)),a.secret.is_truncated?(t(),s("div",ce,[e("button",{type:"button",class:"float-right",onClick:y},"×"),e("strong",null,n(a.$t("web.COMMON.warning")),1),w(" "+n(a.$t("web.shared.secret_was_truncated"))+" "+n(a.secret.original_size)+". ",1)])):i("",!0),e("div",ue,[a.secret.verification?(t(),s("div",me,[e("a",ve,n(a.$t("web.COMMON.login_to_your_account")),1)])):(t(),s("div",ge,pe))]),ye],64))}}),xe={class:""},fe={key:0},ke={key:1,class:"space-y-8"},we={key:0,class:"bg-amber-50 border-l-4 border-amber-400 text-amber-700 p-4 mb-4 dark:bg-amber-900 dark:border-amber-500 dark:text-amber-100"},$e={class:"font-medium"},Ce={key:1,class:"bg-brand-50 border-l-4 border-brand-400 text-brand-700 p-4 mb-4 dark:bg-brand-900 dark:border-brand-500 dark:text-brand-100"},Me={key:0,class:"text-md text-gray-600 dark:text-gray-400"},Oe={key:1,class:"text-xl font-bold text-gray-800 dark:text-gray-200"},Se=["value"],Ne=e("input",{name:"continue",type:"hidden",value:"true"},null,-1),Ve=["placeholder"],Be=["disabled"],De={key:2},Te={class:"flex justify-between items-center mb-4"},Ee={class:"text-sm text-gray-500 dark:text-gray-400 italic"},Le=N('<div class="bg-white dark:bg-gray-900"><div class="max-w-7xl mx-auto py-12 px-4 sm:py-16 sm:px-6 lg:px-8"><div class="text-center"><h2 class="text-base font-semibold text-brandcomp-700 dark:text-brandcomp-600 tracking-wide uppercase opacity-40"> One-Time Secret </h2><h3 class="mt-1 text-3xl font-extrabold text-gray-500 dark:text-gray-300 sm:text-3xl sm:tracking-tight lg:text-4xl"> You&#39;ve got (secret) mail </h3><p class="max-w-xl mt-5 mx-auto text-xl text-gray-400 dark:text-gray-400"> A secure, one-time message awaits you. Before you open it, here&#39;s what you should know: </p></div></div></div><div class="bg-white dark:bg-gray-900"><div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:py-12 lg:px-8"><div class="lg:grid lg:grid-cols-3 lg:gap-8"><div><h3 class="text-lg font-medium text-gray-600 dark:text-white">What is this?</h3><p class="mt-3 text-base text-gray-400 dark:text-gray-300"> Onetime Secret is a secure way to share sensitive information that self-destructs after a single viewing. </p></div><div class="mt-8 lg:mt-0"><h3 class="text-lg font-medium text-gray-600 dark:text-white">Is it secure?</h3><p class="mt-3 text-base text-gray-400 dark:text-gray-300"> Yes. After viewing, the secret is permanently deleted from our servers, ensuring your privacy. </p></div><div class="mt-8 lg:mt-0"><h3 class="text-lg font-medium text-gray6900 dark:text-white whitespace-nowrap"> What happens next? </h3><p class="mt-3 text-base text-gray-400 dark:text-gray-300"> When ready, click the &quot;View Secret&quot; button at the top of the page to reveal your one-time message. </p></div></div></div></div>',2),We={key:3,class:"space-y-4"},je={class:"text-gray-600 dark:text-gray-400"},qe=V({__name:"ShowSecret",props:{secretKey:{}},setup(h){const c=j(),u=h,b=k(""),{record:v,details:y,isLoading:a,error:g,fetchData:B}=A({url:`/api/v2/secret/${u.secretKey}`}),_=k(null),C=k(null);F(B);const M=r=>{var l;(l=r.target.closest(".bg-amber-50, .bg-brand-50"))==null||l.remove()},{isSubmitting:x,error:D,success:T,submitForm:O}=H({url:`/api/v2/secret/${u.secretKey}`,successMessage:"",onSuccess:r=>{_.value=r.record,C.value=r.details},onError:r=>{console.error("Error fetching secret:",r)}}),p=m(()=>_.value||v.value),o=m(()=>C.value||y.value),E=m(()=>a.value||x.value),L=m(()=>D.value||g.value);return I(_,r=>{r&&console.log("Secret fetched successfully")}),(r,l)=>(t(),s($,null,[e("div",xe,[E.value?(t(),s("div",fe,"Loading...")):p.value&&o.value?(t(),s("div",ke,[!o.value.verification&&o.value.is_owner&&!o.value.show_secret?(t(),s("div",we,[e("button",{type:"button",class:"float-right hover:text-amber-900 dark:hover:text-amber-50",onClick:M}," × "),e("strong",$e,n(r.$t("web.COMMON.warning")),1),w(" "+n(r.$t("web.shared.you_created_this_secret")),1)])):i("",!0),!o.value.verification&&o.value.is_owner&&o.value.show_secret?(t(),s("div",Ce,[e("button",{type:"button",class:"float-right hover:text-brand-900 dark:hover:text-brand-50",onClick:M}," × "),w(" "+n(r.$t("web.shared.viewed_own_secret")),1)])):i("",!0),o.value.show_secret?(t(),s("div",We,[e("h2",je,n(r.$t("web.shared.this_message_for_you")),1),S(_e,{secret:p.value,details:o.value},null,8,["secret","details"])])):(t(),s($,{key:2},[S(U,{success:d(T),error:L.value},null,8,["success","error"]),o.value.verification&&!o.value.has_passphrase?(t(),s("p",Me,n(r.$t("web.COMMON.click_to_verify")),1)):i("",!0),o.value.has_passphrase?(t(),s("h2",Oe,n(r.$t("web.shared.requires_passphrase")),1)):i("",!0),e("form",{onSubmit:l[1]||(l[1]=R((...f)=>d(O)&&d(O)(...f),["prevent"])),class:"space-y-4"},[e("input",{name:"shrimp",type:"hidden",value:d(c).shrimp},null,8,Se),Ne,o.value.has_passphrase?z((t(),s("input",{key:0,type:"password","onUpdate:modelValue":l[0]||(l[0]=f=>b.value=f),name:"passphrase",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:r.$t("web.COMMON.enter_passphrase_here")},null,8,Ve)),[[K,b.value]]):i("",!0),e("button",{type:"submit",disabled:d(x),class:"w-full px-6 py-3 text-3xl font-semibold text-white bg-brand-500 rounded-md hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition duration-150 ease-in-out"},n(d(x)?r.$t("web.COMMON.submitting"):r.$t("web.COMMON.click_to_continue")),9,Be)],32),p.value.verification?i("",!0):(t(),s("div",De,[e("div",Te,[e("p",Ee,n(r.$t("web.COMMON.careful_only_see_once")),1)]),Le]))],64))])):i("",!0)]),p.value?i("",!0):(t(),q(X,{key:0}))],64))}});export{qe as default};
