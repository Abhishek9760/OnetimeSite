import{d as g,o as i,c,b as a,h as v,e as r,g as m,I as x,u as k,r as y,i as p,t as w,y as D,z as V,m as A,A as $}from"./main-DAdj96k2.js";import{_ as N}from"./BasicFormAlerts-CGFtMZYC.js";import{u as S}from"./useFormSubmission-D8P3Furg.js";const B=a("label",{for:"domain",class:"hidden text-xl font-medium leading-6 text-gray-900 dark:text-gray-100 bg-inherit","aria-hidden":"false"}," Domain name ",-1),E={class:"relative mt-2 rounded-md shadow-sm"},C=["value","placeholder","aria-invalid"],F={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},I={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400",id:"domain-error"},M=g({__name:"DomainInput",props:{domain:{},placeholder:{},isValid:{type:Boolean}},setup(f){return(e,o)=>(i(),c("div",null,[B,a("div",E,[a("input",{type:"text",name:"domain",id:"domain",value:e.domain,placeholder:e.placeholder,"aria-invalid":!e.isValid,"aria-describedby":"domain-error",class:"block w-full rounded-md border-0 py-3 pl-5 pr-10 text-xl text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-brandcomp-600 shadow-sm dark:bg-gray-700 dark:text-white dark:ring-gray-600 dark:placeholder:text-gray-400 dark:focus:ring-brandcomp-500"},null,8,C),a("div",F,[e.isValid?m("",!0):(i(),v(r(x),{key:0,icon:"heroicons:exclamation-circle",class:"h-6 w-6 text-red-500","aria-hidden":"true"}))])]),e.isValid?m("",!0):(i(),c("p",I," Not a valid domain address. "))]))}}),j={class:"space-y-9 my-16 dark:bg-gray-900"},q=["value"],z=["disabled"],R=g({__name:"DomainForm",emits:["domain-added"],setup(f,{emit:e}){const o=k(),s=y(""),t=e,{isSubmitting:d,error:_,success:b,submitForm:h}=S({url:"/api/v2/account/domains/add",successMessage:"Domain added successfully.",onSuccess:l=>{console.log("Domain added:",l),s.value=l.record.display_domain,s.value||console.error("Domain is undefined or empty");try{t("domain-added",s.value)}catch(n){console.error("Error emitting domain-added event:",n)}},onError:l=>{console.error("Error adding domain:",l)}});return(l,n)=>(i(),c("div",j,[p(N,{success:r(b),error:r(_)},null,8,["success","error"]),a("form",{onSubmit:n[1]||(n[1]=D((...u)=>r(h)&&r(h)(...u),["prevent"])),class:"space-y-6"},[a("input",{type:"hidden",name:"shrimp",value:r(o).shrimp},null,8,q),p(M,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=u=>s.value=u),"is-valid":!0,domain:"",autofocus:"",required:"",placeholder:"e.g. secrets.example.com",class:"dark:bg-gray-800 dark:text-white dark:border-gray-700"},null,8,["modelValue"]),a("button",{type:"submit",disabled:r(d),class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-xl font-medium text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 dark:bg-brand-500 dark:hover:bg-brand-400 dark:focus:ring-offset-gray-900"},w(r(d)?"Adding...":"Continue"),9,z)],32)]))}}),T={class:""},U=a("h1",{class:"text-3xl font-bold mb-6 dark:text-white"},"Add your domain",-1),G={key:0,class:"mt-4 text-gray-600 dark:text-gray-400"},L=g({__name:"AccountDomainAdd",setup(f){const e=V(),o=y(!1);A(()=>{console.log("AccountDomainAdd component mounted")});const s=async t=>{if(!t)throw new Error("Domain is undefined or empty");o.value=!0;try{console.info("Navigation to verify",t),await e.replace({name:"AccountDomainVerify",params:{domain:t}}),await $()}catch(d){console.error("Navigation error:",d),o.value=!1}};return(t,d)=>(i(),c("div",T,[U,p(R,{onDomainAdded:s,disabled:o.value},null,8,["disabled"]),o.value?(i(),c("p",G,"Navigating to verification page...")):m("",!0)]))}});export{L as default};
