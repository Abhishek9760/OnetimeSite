import{B as E,r as x,j as k,m as O,C as W,D as X,d as T,E as oe,A as M,o as R,h as le,w as D,b as p,i as w,e as S,I as Y,T as se,q as ue,u as ie,z as ce,c as A,F as de,k as me,l as fe,f as B,t as j,n as V,y as ve}from"./main-CBJljsce.js";import{u as pe}from"./useFormSubmission-CTy2EZGF.js";import{c as Z,o as b,w as G,h as ee,I as N,A as C,u as ge,i as be,N as H,_ as te,a as y,v as he,b as K,O as ye}from"./keyboard-CWqWnmsm.js";import{_ as xe}from"./DomainVerificationInfo.vue_vue_type_script_setup_true_lang-CkgRCr7L.js";import{u as _e}from"./useFetchData-B2ITb3da.js";import{_ as we}from"./DashboardTabNav.vue_vue_type_script_setup_true_lang-Cn6XvrkK.js";function Ie(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Se(){return/Android/gi.test(window.navigator.userAgent)}function De(){return Ie()||Se()}function F(e,o,a){Z.isServer||E(l=>{document.addEventListener(e,o,a),l(()=>document.removeEventListener(e,o,a))})}function ke(e,o,a){Z.isServer||E(l=>{window.addEventListener(e,o,a),l(()=>window.removeEventListener(e,o,a))})}function Me(e,o,a=k(()=>!0)){function l(n,t){if(!a.value||n.defaultPrevented)return;let s=t(n);if(s===null||!s.getRootNode().contains(s))return;let f=function i(d){return typeof d=="function"?i(d()):Array.isArray(d)||d instanceof Set?d:[d]}(e);for(let i of f){if(i===null)continue;let d=i instanceof HTMLElement?i:b(i);if(d!=null&&d.contains(s)||n.composed&&n.composedPath().includes(d))return}return!G(s,ee.Loose)&&s.tabIndex!==-1&&n.preventDefault(),o(n,s)}let u=x(null);F("pointerdown",n=>{var t,s;a.value&&(u.value=((s=(t=n.composedPath)==null?void 0:t.call(n))==null?void 0:s[0])||n.target)},!0),F("mousedown",n=>{var t,s;a.value&&(u.value=((s=(t=n.composedPath)==null?void 0:t.call(n))==null?void 0:s[0])||n.target)},!0),F("click",n=>{De()||u.value&&(l(n,()=>u.value),u.value=null)},!0),F("touchend",n=>l(n,()=>n.target instanceof HTMLElement?n.target:null),!0),ke("blur",n=>l(n,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function U(e,o){if(e)return e;let a=o??"button";if(typeof a=="string"&&a.toLowerCase()==="button")return"button"}function Te(e,o){let a=x(U(e.value.type,e.value.as));return O(()=>{a.value=U(e.value.type,e.value.as)}),E(()=>{var l;a.value||b(o)&&b(o)instanceof HTMLButtonElement&&!((l=b(o))!=null&&l.hasAttribute("type"))&&(a.value="button")}),a}function q(e){return[e.screenX,e.screenY]}function Re(){let e=x([-1,-1]);return{wasMoved(o){let a=q(o);return e.value[0]===a[0]&&e.value[1]===a[1]?!1:(e.value=a,!0)},update(o){e.value=q(o)}}}let ne=Symbol("Context");var P=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(P||{});function Pe(){return W(ne,null)}function $e(e){X(ne,e)}function Fe(e){throw new Error("Unexpected object: "+e)}var I=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(I||{});function Ae(e,o){let a=o.resolveItems();if(a.length<=0)return null;let l=o.resolveActiveIndex(),u=l??-1;switch(e.focus){case 0:{for(let n=0;n<a.length;++n)if(!o.resolveDisabled(a[n],n,a))return n;return l}case 1:{u===-1&&(u=a.length);for(let n=u-1;n>=0;--n)if(!o.resolveDisabled(a[n],n,a))return n;return l}case 2:{for(let n=u+1;n<a.length;++n)if(!o.resolveDisabled(a[n],n,a))return n;return l}case 3:{for(let n=a.length-1;n>=0;--n)if(!o.resolveDisabled(a[n],n,a))return n;return l}case 4:{for(let n=0;n<a.length;++n)if(o.resolveId(a[n],n,a)===e.id)return n;return l}case 5:return null;default:Fe(e)}}let z=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Q(e){var o,a;let l=(o=e.innerText)!=null?o:"",u=e.cloneNode(!0);if(!(u instanceof HTMLElement))return l;let n=!1;for(let s of u.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))s.remove(),n=!0;let t=n?(a=u.innerText)!=null?a:"":l;return z.test(t)&&(t=t.replace(z,"")),t}function Ee(e){let o=e.getAttribute("aria-label");if(typeof o=="string")return o.trim();let a=e.getAttribute("aria-labelledby");if(a){let l=a.split(" ").map(u=>{let n=document.getElementById(u);if(n){let t=n.getAttribute("aria-label");return typeof t=="string"?t.trim():Q(n).trim()}return null}).filter(Boolean);if(l.length>0)return l.join(", ")}return Q(e).trim()}function Ce(e){let o=x(""),a=x("");return()=>{let l=b(e);if(!l)return"";let u=l.innerText;if(o.value===u)return a.value;let n=Ee(l).trim().toLowerCase();return o.value=u,a.value=n,n}}var Le=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Le||{}),Oe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Oe||{});function Ne(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let ae=Symbol("MenuContext");function L(e){let o=W(ae,null);if(o===null){let a=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,L),a}return o}let Be=T({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:o,attrs:a}){let l=x(1),u=x(null),n=x(null),t=x([]),s=x(""),f=x(null),i=x(1);function d(r=m=>m){let m=f.value!==null?t.value[f.value]:null,c=ye(r(t.value.slice()),_=>b(_.dataRef.domRef)),g=m?c.indexOf(m):null;return g===-1&&(g=null),{items:c,activeItemIndex:g}}let v={menuState:l,buttonRef:u,itemsRef:n,items:t,searchQuery:s,activeItemIndex:f,activationTrigger:i,closeMenu:()=>{l.value=1,f.value=null},openMenu:()=>l.value=0,goToItem(r,m,c){let g=d(),_=Ae(r===I.Specific?{focus:I.Specific,id:m}:{focus:r},{resolveItems:()=>g.items,resolveActiveIndex:()=>g.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.disabled});s.value="",f.value=_,i.value=c??1,t.value=g.items},search(r){let m=s.value!==""?0:1;s.value+=r.toLowerCase();let c=(f.value!==null?t.value.slice(f.value+m).concat(t.value.slice(0,f.value+m)):t.value).find(_=>_.dataRef.textValue.startsWith(s.value)&&!_.dataRef.disabled),g=c?t.value.indexOf(c):-1;g===-1||g===f.value||(f.value=g,i.value=1)},clearSearch(){s.value=""},registerItem(r,m){let c=d(g=>[...g,{id:r,dataRef:m}]);t.value=c.items,f.value=c.activeItemIndex,i.value=1},unregisterItem(r){let m=d(c=>{let g=c.findIndex(_=>_.id===r);return g!==-1&&c.splice(g,1),c});t.value=m.items,f.value=m.activeItemIndex,i.value=1}};return Me([u,n],(r,m)=>{var c;v.closeMenu(),G(m,ee.Loose)||(r.preventDefault(),(c=b(u))==null||c.focus())},k(()=>l.value===0)),X(ae,v),$e(k(()=>ge(l.value,{0:P.Open,1:P.Closed}))),()=>{let r={open:l.value===0,close:v.closeMenu};return C({ourProps:{},theirProps:e,slot:r,slots:o,attrs:a,name:"Menu"})}}}),je=T({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:o,slots:a,expose:l}){var u;let n=(u=e.id)!=null?u:`headlessui-menu-button-${N()}`,t=L("MenuButton");l({el:t.buttonRef,$el:t.buttonRef});function s(v){switch(v.key){case y.Space:case y.Enter:case y.ArrowDown:v.preventDefault(),v.stopPropagation(),t.openMenu(),M(()=>{var r;(r=b(t.itemsRef))==null||r.focus({preventScroll:!0}),t.goToItem(I.First)});break;case y.ArrowUp:v.preventDefault(),v.stopPropagation(),t.openMenu(),M(()=>{var r;(r=b(t.itemsRef))==null||r.focus({preventScroll:!0}),t.goToItem(I.Last)});break}}function f(v){switch(v.key){case y.Space:v.preventDefault();break}}function i(v){e.disabled||(t.menuState.value===0?(t.closeMenu(),M(()=>{var r;return(r=b(t.buttonRef))==null?void 0:r.focus({preventScroll:!0})})):(v.preventDefault(),t.openMenu(),Ne(()=>{var r;return(r=b(t.itemsRef))==null?void 0:r.focus({preventScroll:!0})})))}let d=Te(k(()=>({as:e.as,type:o.type})),t.buttonRef);return()=>{var v;let r={open:t.menuState.value===0},{...m}=e,c={ref:t.buttonRef,id:n,type:d.value,"aria-haspopup":"menu","aria-controls":(v=b(t.itemsRef))==null?void 0:v.id,"aria-expanded":t.menuState.value===0,onKeydown:s,onKeyup:f,onClick:i};return C({ourProps:c,theirProps:m,slot:r,attrs:o,slots:a,name:"MenuButton"})}}}),Ve=T({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:o,slots:a,expose:l}){var u;let n=(u=e.id)!=null?u:`headlessui-menu-items-${N()}`,t=L("MenuItems"),s=x(null);l({el:t.itemsRef,$el:t.itemsRef}),be({container:k(()=>b(t.itemsRef)),enabled:k(()=>t.menuState.value===0),accept(r){return r.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:r.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(r){r.setAttribute("role","none")}});function f(r){var m;switch(s.value&&clearTimeout(s.value),r.key){case y.Space:if(t.searchQuery.value!=="")return r.preventDefault(),r.stopPropagation(),t.search(r.key);case y.Enter:if(r.preventDefault(),r.stopPropagation(),t.activeItemIndex.value!==null){let c=t.items.value[t.activeItemIndex.value];(m=b(c.dataRef.domRef))==null||m.click()}t.closeMenu(),te(b(t.buttonRef));break;case y.ArrowDown:return r.preventDefault(),r.stopPropagation(),t.goToItem(I.Next);case y.ArrowUp:return r.preventDefault(),r.stopPropagation(),t.goToItem(I.Previous);case y.Home:case y.PageUp:return r.preventDefault(),r.stopPropagation(),t.goToItem(I.First);case y.End:case y.PageDown:return r.preventDefault(),r.stopPropagation(),t.goToItem(I.Last);case y.Escape:r.preventDefault(),r.stopPropagation(),t.closeMenu(),M(()=>{var c;return(c=b(t.buttonRef))==null?void 0:c.focus({preventScroll:!0})});break;case y.Tab:r.preventDefault(),r.stopPropagation(),t.closeMenu(),M(()=>he(b(t.buttonRef),r.shiftKey?K.Previous:K.Next));break;default:r.key.length===1&&(t.search(r.key),s.value=setTimeout(()=>t.clearSearch(),350));break}}function i(r){switch(r.key){case y.Space:r.preventDefault();break}}let d=Pe(),v=k(()=>d!==null?(d.value&P.Open)===P.Open:t.menuState.value===0);return()=>{var r,m;let c={open:t.menuState.value===0},{...g}=e,_={"aria-activedescendant":t.activeItemIndex.value===null||(r=t.items.value[t.activeItemIndex.value])==null?void 0:r.id,"aria-labelledby":(m=b(t.buttonRef))==null?void 0:m.id,id:n,onKeydown:f,onKeyup:i,role:"menu",tabIndex:0,ref:t.itemsRef};return C({ourProps:_,theirProps:g,slot:c,attrs:o,slots:a,features:H.RenderStrategy|H.Static,visible:v.value,name:"MenuItems"})}}}),J=T({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:o,attrs:a,expose:l}){var u;let n=(u=e.id)!=null?u:`headlessui-menu-item-${N()}`,t=L("MenuItem"),s=x(null);l({el:s,$el:s});let f=k(()=>t.activeItemIndex.value!==null?t.items.value[t.activeItemIndex.value].id===n:!1),i=Ce(s),d=k(()=>({disabled:e.disabled,get textValue(){return i()},domRef:s}));O(()=>t.registerItem(n,d)),oe(()=>t.unregisterItem(n)),E(()=>{t.menuState.value===0&&f.value&&t.activationTrigger.value!==0&&M(()=>{var h,$;return($=(h=b(s))==null?void 0:h.scrollIntoView)==null?void 0:$.call(h,{block:"nearest"})})});function v(h){if(e.disabled)return h.preventDefault();t.closeMenu(),te(b(t.buttonRef))}function r(){if(e.disabled)return t.goToItem(I.Nothing);t.goToItem(I.Specific,n)}let m=Re();function c(h){m.update(h)}function g(h){m.wasMoved(h)&&(e.disabled||f.value||t.goToItem(I.Specific,n,0))}function _(h){m.wasMoved(h)&&(e.disabled||f.value&&t.goToItem(I.Nothing))}return()=>{let{disabled:h,...$}=e,re={active:f.value,disabled:h,close:t.closeMenu};return C({ourProps:{id:n,ref:s,role:"menuitem",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,onClick:v,onFocus:r,onPointerenter:c,onMouseenter:c,onPointermove:g,onMousemove:g,onPointerleave:_,onMouseleave:_},theirProps:{...a,...$},slot:re,attrs:a,slots:o,name:"MenuItem"})}}});const He=p("span",{class:"sr-only"},"Open options",-1),Ke={class:"py-1"},Ue={__name:"MinimalDropdownMenu",setup(e){return(o,a)=>(R(),le(S(Be),{as:"div",class:"relative inline-block text-left"},{default:D(()=>[p("div",null,[w(S(je),{class:"flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-100"},{default:D(()=>[He,w(S(Y),{icon:"heroicons:ellipsis-vertical-20-solid",class:"h-5 w-5","aria-hidden":"true"})]),_:1})]),w(se,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:D(()=>[w(S(Ve),{class:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:D(()=>[p("div",Ke,[ue(o.$slots,"menu-items")])]),_:3})]),_:3})]),_:3}))}},qe={class:"px-4 sm:px-6 lg:px-8 dark:bg-gray-900"},ze={class:"sm:flex sm:items-center"},Qe=p("div",{class:"sm:flex-auto"},[p("h1",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-100"},"Domains"),p("p",{class:"mt-2 text-sm text-gray-700 dark:text-gray-300"},"These are your verified custom domains.")],-1),Je={class:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},We={class:"-mx-4 mt-10 ring-1 ring-gray-300 sm:mx-0 sm:rounded-lg dark:ring-gray-700"},Xe={class:"min-w-full divide-y divide-gray-300 dark:divide-gray-700"},Ye=p("thead",null,[p("tr",null,[p("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 dark:text-gray-100"},"Domain "),p("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 lg:table-cell dark:text-gray-100"}," Status"),p("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 lg:table-cell dark:text-gray-100"}," Added"),p("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[p("span",{class:"sr-only"},"Actions")])])],-1),Ze={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ge=["tabindex"],et={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 dark:text-gray-100"},tt={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-gray-500 lg:table-cell dark:text-gray-300"},nt={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-gray-500 lg:table-cell dark:text-gray-300"},at={class:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},rt=["action"],ot=["value"],lt=["disabled"],st=p("span",null,"Remove",-1),ut=T({__name:"DomainsTable",props:{domains:{}},setup(e){const o=ie(),a=ce(),{isSubmitting:l,submitForm:u}=pe({successMessage:"Domain removed successfully",onSuccess:()=>{a.go(0)}}),n=t=>{const s=new Date(t*1e3),i=Math.floor((new Date().getTime()-s.getTime())/1e3),d=new Intl.RelativeTimeFormat("en",{numeric:"auto"});return i<60?d.format(-i,"second"):i<3600?d.format(-Math.floor(i/60),"minute"):i<86400?d.format(-Math.floor(i/3600),"hour"):d.format(-Math.floor(i/86400),"day")};return(t,s)=>{const f=fe("router-link");return R(),A("div",qe,[p("div",ze,[Qe,p("div",Je,[w(f,{to:"/account/domains/add",class:"block rounded-md bg-brand-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-brand-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-600 dark:bg-brand-500 dark:hover:bg-brand-400"},{default:D(()=>[B("Add Domain")]),_:1})])]),p("div",We,[p("table",Xe,[Ye,p("tbody",Ze,[(R(!0),A(de,null,me(t.domains,(i,d)=>(R(),A("tr",{key:i.identifier,tabindex:d},[p("td",et,j(i.display_domain),1),p("td",tt,[w(xe,{mode:"icon",domain:i},null,8,["domain"])]),p("td",nt,j(n(Number(i.created))),1),p("td",at,[w(Ue,null,{"menu-items":D(()=>[w(S(J),null,{default:D(({active:v})=>[w(f,{to:{name:"AccountDomainVerify",params:{domain:i.display_domain}},class:V([v?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"])},{default:D(()=>[B(" Review verification steps ")]),_:2},1032,["to","class"])]),_:2},1024),p("form",{onSubmit:s[0]||(s[0]=ve(v=>S(u)(v),["prevent"])),action:`/api/v2/account/domains/${i.display_domain}/remove`},[p("input",{type:"hidden",name:"shrimp",value:S(o).shrimp},null,8,ot),w(S(J),{class:"text-red-500"},{default:D(({active:v})=>[p("button",{type:"submit",class:V([v?"bg-gray-100 text-gray-900":"text-gray-700","flex w-full items-center px-4 py-2 text-left text-sm"]),disabled:S(l)},[w(S(Y),{icon:"heroicons:trash-20-solid",class:"mr-2 h-5 w-5 text-red-500"}),st],10,lt)]),_:1})],40,rt)]),_:2},1024)])],8,Ge))),128))])])])])}}}),it={class:""},gt=T({__name:"AccountDomains",setup(e){const{records:o,fetchData:a}=_e({url:"/api/v2/account/domains"});return O(a),(l,u)=>(R(),A("div",it,[w(we),w(ut,{domains:S(o)},null,8,["domains"])]))}});export{gt as default};
